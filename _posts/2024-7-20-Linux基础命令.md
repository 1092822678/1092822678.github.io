---
layout: post
title: "Linux基础命令"
date:   2024-7-20
tags: [tag1, tag2]
comments: true
author: zlchen
---

# 基础命令
* Linux万物皆文件
* 习惯使用`man`指令或者`--help`参数去学习命令的使用方法

## 查看帮助 `man`
```
# 查看命令的详细信息
man ${command} 
# man ls

# 查看文件的详细信息
man 5 ${filename}
# man 5 passwd
```

## 文件操作 `cp/mv/rm`
### `cp` - 复制文件或目录
> cp [-adfilprsu] 来源档(source) 目标档(destination)   
> cp [options] source1 source2 source3 .... directory

```
# 将root目录下的.bashrc复制到/tmp下, 并命名为 bashrc
cp ~/.bashrc /tmp/bashrc
```
### `mv` - 移动文件或目录
> mv [-fiu] source destination  
> mv [options] source1 source2 source3 .... directory

```
# 移动bashrc到mvtest中
mv bashrc mvtest
```
### `rm` - 删除文件或目录
> rm [-fir] 文件或目录  

```
# 将刚刚cp创建的bashrc删除(-i:互动模式，会进行询问)
rm -i bashrc
```

## 文件内容操作 `cat/head/tail`
### `cat` - 将文件打印到输出流
```
cat xxxx.txt
```
### `head/tail` - 查看文件开头/结尾的num行，不指定默认为10
```
head -n 2 xxxx.txt
tail -n 10 xxxx.txt
```

### Linux三剑客之 `sed/grep/awk` **(常用)**
> 首先了解下三剑客的使用范围  
> grep：普通搜索，主要用于搜索关键字  
> sed：每次读入一行来处理的，sed 适合简单的文本替换和搜索，sed读取一行，以行作为单位，进行处理  
> awk：每次读入一行来处理的（同sed），但awk读取一行，切割成字段，以字段为单位，进行细节处理  

#### `sed` - 文件修改 
* 替换文件内容
```
# 将filename中的所有aaa改成bbb
sed -i 's/aaa/bbb/g' filename
# -i 表示直接修改, s代表替换, g表示所有内容全部修改
```

* 删除文件内容
```
# 删除filename中的1:3行
sed -i 1,3d filename
```
#### `grep` - 查找 
```
# -n 显示搜索到的内容的行号
grep -n [PATTERN] [FILE]

# 在指定目录搜索文件名（可使用正则） 
find [PATH] -name [PATTERN]
```
#### `awk` - 文本的切片处理
相对于grep的查找，sed的编辑，awk更加注重于对于文本的切片处理
```
# 打印文本的第一个字段和倒数第二个字段
awk -F ':' '{print $1, $(NF-1)}' a.txt
注: -F ':' 表示字段之间由冒号分隔

# 实用命令: 统计每个用户的进程占了多少内存
ps aux | awk 'NR!=1{a[$1]+=$6;} END { for(i in a) print i ", " a[i]"KB";}'
```
## 文件压缩 `tar/zip`
```
echo "hello" >> hello.txt

# 压缩
tar -zvcf hello.tar.gz hello.txt

# 删除源文件
rm -rf hello.txt

# 解压
tar -zvxf hello.tar.gz 
```

## 文件与目录权限管理 `chmod`
```
# 修改权限 
chmod 750 filename
# 数字权限: r=4, w=2, x=1
# chenzelong@MacBook-Pro-5 czl % chmod 750 hello  
# chenzelong@MacBook-Pro-5 czl % ls -l  
drwxr-x---   2 chenzelong  staff   64 Jul 23 17:28 hello
```

# Linux系统管理
## 网络管理
### 检测网络联通性
```
ping www.baidu.com
```
### 各种网络相关信息
使用`netstat`, 可以查询网络连接、路由表、接口状态等信息
```
netstat
-n, --numeric            don't resolve names
-l, --listening          display listening server sockets
-p, --programs           display PID/Program name for sockets
```
### 查看网卡信息
```
ip/ifconif
# 查看本机ip地址
hostname -i
```
### 查看某个端口被哪个进程占用 - **常用**
```
lsof -i:8000
```
## 进程管理
### 展示当前所有进程快照
```
# 格式化展示所有进程的信息
ps -ef
-e     Select all processes.  Identical to -A
-f     Do full-format listing. 
```
### `top` 查看进程信息
这里更推荐使用 htop命令（加强版 top） ，需要额外安装：
```
yum install htop -y
```
### `kill` 杀死进程（发送信号）
进程的 pid 可以通过 ps 相关的命令查询
```
# 强制杀死进程
kill -9 <pid>
```
## 磁盘管理

### `df` - 查看整个文件系统的磁盘使用情况
```
df
-h, --human-readable  print sizes in human readable format (e.g., 1K 234M 2G)
```

### `du` - 查看指定文件的磁盘使用情况
```
du
-a, --all               write counts for all files, not just directories
-h, --human-readable    print sizes in human readable format (e.g., 1K 234M 2G)
-s, --summarize         display only a total for each argument
-m     like --block-size=1M
-k     like --block-size=1K

# 查看指定目录的大小
du -sh <directory_name>

# 查看当前目录下所有文件的大小
du -sh *
```
